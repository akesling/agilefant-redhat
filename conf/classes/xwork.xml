<!DOCTYPE xwork PUBLIC "-//OpenSymphony Group//XWork 1.1.1//EN"
"http://www.opensymphony.com/xwork/xwork-1.1.1.dtd">

<xwork>
	<!-- Include webwork defaults (from WebWork JAR). -->
	<include file="webwork-default.xml" />

	<!-- Configuration for the default package. -->
	<package name="default" extends="webwork-default">
		<interceptors>
			<interceptor name="refreshUser" class="refreshUserInterceptor"/>
			<interceptor-stack name="authenticationStack">
				<interceptor-ref name="completeStack"/>
				<interceptor-ref name="refreshUser"/>				
			</interceptor-stack>
		</interceptors>
		<default-interceptor-ref name="authenticationStack"/>
		<action name="simpleCounter" class="fi.hut.soberit.agilefant.web.SimpleCounter">
			<result name="success">/WEB-INF/jsp/showCounter.jsp</result>
		</action>
		<action name="refreshChart" method="refreshChart" class="fi.hut.soberit.agilefant.web.SimpleCounter">
			<result name="success">/WEB-INF/jsp/showCounter.jsp</result></action>
		<action name="resetCounter" method="resetCounter" class="fi.hut.soberit.agilefant.web.SimpleCounter">
			<result name="success">/WEB-INF/jsp/showCounter.jsp</result>
		</action>		
<!-- Activity type actions -->
		<action name="listActivityTypes" method="getAll" class="activityTypeAction">
			<result>/WEB-INF/jsp/listActivityTypes.jsp</result>
		</action>
		<action name="editActivityType" method="edit" class="activityTypeAction">
			<result>/WEB-INF/jsp/editActivityType.jsp</result>
		</action>
		<action name="createActivityType" method="create" class="activityTypeAction">
			<result>/WEB-INF/jsp/editActivityType.jsp</result>
		</action>
		<action name="deleteActivityType" method="delete" class="activityTypeAction">
			<result>/WEB-INF/jsp/listActivityTypes.jsp</result>
		</action>
		<action name="storeActivityType" method="store" class="activityTypeAction">
			<result>/WEB-INF/jsp/listActivityTypes.jsp</result>
		</action>
<!-- /Activity type actions -->
<!-- Product actions -->
		<action name="listProducts">
			<result>/WEB-INF/jsp/listProducts.jsp</result>
		</action>
		<action name="editProduct" method="edit" class="productAction">
			<result>/WEB-INF/jsp/editProduct.jsp</result>
		</action>
		<action name="createProduct" method="create" class="productAction">
			<result>/WEB-INF/jsp/editProduct.jsp</result>
		</action>
		<action name="deleteProduct" method="delete" class="productAction">
			<result>/WEB-INF/jsp/listProducts.jsp</result>
		</action>
		<action name="storeProduct" method="store" class="productAction">
			<result>/WEB-INF/jsp/listProducts.jsp</result>
		</action>
<!-- /Product actions -->
<!-- BacklogItem actions -->
		<action name="listBacklogItems">
			<result>/WEB-INF/jsp/listBacklogItems.jsp</result>
		</action>
		<action name="editBacklogItem" method="edit" class="backlogItemAction">
			<result>/WEB-INF/jsp/editBacklogItem.jsp</result>
		</action>
		<action name="createBacklogItem" method="create" class="backlogItemAction">
			<result>/WEB-INF/jsp/editBacklogItem.jsp</result>
		</action>
		<action name="deleteBacklogItem" method="delete" class="backlogItemAction">
			<result type="redirect">editBacklog.action?backlogId=${backlogId}</result>
		</action>
		<action name="storeBacklogItem" method="store" class="backlogItemAction">
			<result type="redirect">editBacklog.action?backlogId=${backlogId}</result>
		</action>
<!-- /BacklogItem actions -->
<!-- Deliverable actions -->
		<action name="listDeliverables">
			<result>/WEB-INF/jsp/listDeliverables.jsp</result>
		</action>
		<action name="editDeliverable" method="edit" class="deliverableAction">
			<result>/WEB-INF/jsp/editDeliverable.jsp</result>
		</action>
		<action name="createDeliverable" method="create" class="deliverableAction">
			<result>/WEB-INF/jsp/editDeliverable.jsp</result>
		</action>
		<action name="deleteDeliverable" method="delete" class="deliverableAction">
			<result type="redirect">editProduct.action?productId=${productId}</result>
		</action>
		<action name="storeDeliverable" method="store" class="deliverableAction">
			<result type="redirect">editProduct.action?productId=${productId}</result>
		</action>
<!-- /Deliverable actions -->
<!-- Work type actions -->
<!-- TODO -->
<!-- Backlog actions -->
		<action name="editBacklog" method="edit" class="backlogAction">
			<result name="editProduct" type="redirect">editProduct.action?productId=${backlogId}</result>
			<result name="editDeliverable" type="redirect">editDeliverable.action?deliverableId=${backlogId}</result>
			<result name="editIteration" type="redirect">editIteration.action?iterationId=${backlogId}</result>
		</action>
		<action name="moveBacklogItem" method="moveBacklogItem" class="backlogAction">
			<result name="editProduct" type="redirect">editProduct.action?productId=${backlogId}</result>
			<result name="editDeliverable" type="redirect">editDeliverable.action?deliverableId=${backlogId}</result>
			<result name="editIteration" type="redirect">editIteration.action?iterationId=${backlogId}</result>
		</action>
<!-- /Backlog actions -->
<!-- Task actions -->
		<action name="editTask" method="edit" class="taskAction">
			<result>/WEB-INF/jsp/editTask.jsp</result>
		</action>
		<action name="createTask" method="create" class="taskAction">
			<result>/WEB-INF/jsp/editTask.jsp</result>
		</action>
		<action name="deleteTask" method="delete" class="taskAction">
			<result type="redirect">editBacklogItem.action?backlogItemId=${backlogItemId}</result>
		</action>
		<action name="storeTask" method="store" class="taskAction">
			<result type="redirect">editBacklogItem.action?backlogItemId=${backlogItemId}</result>
		</action>
		<action name="myTasks">
			<result>/WEB-INF/jsp/showMyTasks.jsp</result>
		</action>
<!-- /Task actions -->
<!-- Iteration actions -->
		<action name="editIteration" method="edit" class="iterationAction">
			<result>/WEB-INF/jsp/editIteration.jsp</result>
		</action>
		<action name="createIteration" method="create" class="iterationAction">
			<result>/WEB-INF/jsp/editIteration.jsp</result>
		</action>
		<action name="deleteIteration" method="delete" class="iterationAction">
			<result type="redirect">editDeliverable.action?deliverableId=${deliverableId}</result>
		</action>
		<action name="storeIteration" method="store" class="iterationAction">
			<result type="redirect">editDeliverable.action?deliverableId=${deliverableId}</result>
		</action>
<!-- /Iteration actions -->
<!-- User actions -->
		<action name="assignTask" class="assignTaskAction">
			<result type="redirect">editTask.action?taskId=${taskId}</result>
		</action>
		<action name="listUsers">
			<result>/WEB-INF/jsp/listUsers.jsp</result>
		</action>
		<action name="editUser" method="edit" class="userAction">
			<result>/WEB-INF/jsp/editUser.jsp</result>
		</action>
		<action name="createUser" method="create" class="userAction">
			<result>/WEB-INF/jsp/editUser.jsp</result>
		</action>
		<action name="deleteUser" method="delete" class="userAction">
			<result type="redirect">listUsers.action</result>
		</action>
		<action name="storeUser" method="store" class="userAction">
			<result type="redirect">listUsers.action</result>
			<result name="error">/WEB-INF/jsp/editUser.jsp</result>
		</action>
	<!-- 
	Added this to make adding test user addition possible, remove when no longer needed.
	-->
		<action name="addTestUser" method="addTestUser" class="userAction">
			<result>/index.jsp</result>
		</action>
<!-- /User actions -->

		<action name="testlayout">
			<result>/WEB-INF/jsp/newlayout.jsp</result>
		</action>

	</package>
</xwork>
